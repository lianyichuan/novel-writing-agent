# 小说写作Agent使用指南

## 🚀 快速开始

### 1. 系统要求
- Node.js >= 16.0.0
- npm >= 8.0.0
- 现代浏览器 (Chrome, Firefox, Safari, Edge)

### 2. 启动系统

#### Windows用户
双击运行 `start.bat` 文件，或在命令行中执行：
```bash
start.bat
```

#### Linux/Mac用户
在终端中执行：
```bash
./start.sh
```

#### 手动启动
```bash
# 安装所有依赖
npm run install:all

# 启动开发服务
npm run dev
```

### 3. 访问系统
- 前端界面: http://localhost:3000
- 后端API: http://localhost:3001/api

## 📖 功能介绍

### 主控制台 (Dashboard)
- **实时统计**: 查看总章节数、总字数、今日字数等关键指标
- **剧情进度**: 监控各条主线剧情的发展进度
- **最近活动**: 查看系统的最新操作记录
- **写作质量**: 显示平均质量评分和Agent运行状态

### 文档管理 (Document Editor)
- **核心文档编辑**: 
  - 作者意愿控制台: 设定写作方向和要求
  - 主线剧情脉络: 管理整体剧情结构
  - 原始人物关系: 维护人物关系网络
  - Agent执行手册: 配置AI写作规则

- **功能特性**:
  - Monaco编辑器，支持Markdown语法高亮
  - 实时保存提醒
  - 版本控制和备份
  - 自动字数统计

### 剧情追踪 (Plot Tracker)
- **多线程剧情管理**: 同时追踪主角成长线、势力争斗线、情感发展线等
- **进度可视化**: 直观显示各条剧情线的完成进度
- **时间线视图**: 按章节顺序展示剧情发展节点
- **状态管理**: 区分进行中、已完成、待开始等不同状态

### 人物管理 (Character Manager)
- **人物档案**: 详细记录每个角色的基本信息、性格特征、背景故事
- **关系网络**: 可视化展示人物之间的复杂关系
- **等级系统**: 追踪修炼等级变化
- **出场统计**: 记录首次和最后出现章节

### 写作Agent (AI Assistant)
- **智能大纲生成**: 根据当前剧情自动生成章节大纲
- **章节内容创作**: AI自动写作完整章节内容
- **质量检查**: 自动评估文字流畅度、剧情连贯性、人物一致性
- **参数配置**: 自定义章节号、字数要求、特殊指示

## 🔧 配置说明

### LLM API配置
编辑 `config/llm-config.json` 文件：

```json
{
  "providers": {
    "openai": {
      "apiKey": "your-openai-api-key-here",
      "model": "gpt-4",
      "maxTokens": 4000,
      "temperature": 0.7
    }
  },
  "defaultProvider": "openai"
}
```

### 应用配置
编辑 `config/app-config.json` 文件：

```json
{
  "writing": {
    "maxChapterLength": 3000,
    "minChapterLength": 2000,
    "targetWordsPerDay": 3000
  }
}
```

## 📝 使用流程

### 日常写作流程
1. **检查系统状态**: 在主控制台查看当前进度
2. **更新文档**: 在文档管理中更新作者意愿和剧情设定
3. **生成大纲**: 使用写作Agent生成下一章节大纲
4. **审核大纲**: 检查大纲是否符合预期，必要时修改
5. **生成内容**: 让AI根据大纲生成完整章节
6. **质量检查**: 使用质量检查功能评估内容
7. **手动优化**: 根据反馈进行人工调整
8. **更新进度**: 在剧情追踪中更新相关进度

### 人物管理流程
1. **创建人物档案**: 添加新角色的基本信息
2. **建立关系**: 设定人物之间的关系类型和强度
3. **更新状态**: 随剧情发展更新人物状态
4. **关系维护**: 定期检查和更新人物关系变化

## 🛠️ 故障排除

### 常见问题

**Q: 前端无法访问？**
A: 检查端口3000是否被占用，确保后端服务正常运行

**Q: API请求失败？**
A: 检查后端服务是否启动，端口3001是否可访问

**Q: 文档保存失败？**
A: 检查documents文件夹权限，确保有写入权限

**Q: AI功能不工作？**
A: 检查LLM API配置，确保API密钥正确且有足够额度

### 日志查看
- 后端日志: 在后端终端窗口查看
- 前端日志: 在浏览器开发者工具的Console中查看

## 📊 性能优化

### 建议配置
- 内存: 至少4GB可用内存
- 存储: 至少1GB可用空间用于文档和备份
- 网络: 稳定的网络连接用于LLM API调用

### 优化建议
1. 定期清理备份文件
2. 合理设置LLM请求频率
3. 及时保存重要文档
4. 定期更新依赖包

## 🔒 数据安全

### 备份策略
- 系统自动备份所有文档修改
- 建议定期手动备份整个documents文件夹
- 重要内容建议同步到云存储

### 隐私保护
- 所有数据存储在本地
- LLM API调用请注意隐私政策
- 敏感内容建议加密存储

## 📞 技术支持

如遇到问题，请：
1. 查看本使用指南
2. 检查系统日志
3. 确认配置文件正确
4. 重启系统尝试解决

---

**祝您写作愉快！** 📚✨
